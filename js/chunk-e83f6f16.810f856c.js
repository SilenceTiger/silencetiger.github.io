(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e83f6f16"],{"092a":function(e,t,n){"use strict";n("26ff");var r=n("fd32"),i=n("5f8f"),s=n("abe9"),a=n("f1df"),o=n("ce24"),u=n("bc17"),l=n("6f04"),c=n("4611"),h=n("df45"),d=function(e){var t=[],n=1e3,r=function(){},i=function(){},s=function e(t){t&&e.data(t),r(),i(),e.render()};return s.render=function(){var i=!0;function a(){if(!i)return!0;var r=t.splice(0,n);r.map(e),requestAnimationFrame(a)}r=s.invalidate=function(){i=!1},a()},s.data=function(e){return r(),t=e.slice(0),s},s.add=function(e){t=t.concat(e)},s.rate=function(e){return arguments.length?(n=e,s):n},s.remaining=function(){return t.length},s.clear=function(e){return arguments.length?(i=e,s):(i(),s)},s.invalidate=r,s},f=function(e){return e.width-e.margin.right-e.margin.left},m=function(e,t){if(0===e.length)return[];var n=t.domain(),r=t.range(),i=[];return r.forEach(function(t,r){t>=e[0]&&t<=e[1]&&i.push(n[r])}),i},g=function(e,t){return null===t?[]:"undefined"===typeof t.invert?m(e,t):e.map(function(e){return t.invert(e)})},v=function(e,t,n){return function(s){var a=e.brushes,o=e.brushNodes;if("undefined"===typeof s)return Object.keys(t.dimensions).reduce(function(e,n){var r=a[n];if(void 0!==r&&null!==Object(i["a"])(o[n])){var s=Object(i["a"])(o[n]),u=t.dimensions[n].yscale,l=g(s,u);e[n]={extent:r.extent(),selection:{raw:s,scaled:l}}}return e},{});var u={};return n.g().selectAll(".brush").each(function(e){u[e]=Object(r["f"])(this)}),Object.keys(t.dimensions).forEach(function(e){if(void 0!==s[e]){var n=a[e];if(void 0!==n){var r=t.dimensions[e],i=s[e].map(r.yscale);u[e].call(n).call(n.move,i.reverse())}}}),n.renderBrushed(),n}},p=void 0,b=function(e,t,n){return function(i){var s=e.brushes;return void 0===i?(t.brushed=!1,void 0!==n.g()&&null!==n.g()&&(n.g().selectAll(".brush").each(function(e){void 0!==s[e]&&Object(r["f"])(this).call(s[e].move,null)}),n.renderBrushed())):(t.brushed=!1,void 0!==n.g()&&null!==n.g()&&(n.g().selectAll(".brush").each(function(e){e===i&&(Object(r["f"])(this).call(s[e].move,null),"function"===typeof s[e].type&&s[e].event(Object(r["f"])(this)))}),n.renderBrushed())),p}},y=function(e,t,n){return function(){var r=e.brushNodes,s=function(e){return r[e]&&null!==Object(i["a"])(r[e])},a=Object.keys(t.dimensions).filter(s),o=a.map(function(e){var n=Object(i["a"])(r[e]);return"function"===typeof t.dimensions[e].yscale.invert?[t.dimensions[e].yscale.invert(n[1]),t.dimensions[e].yscale.invert(n[0])]:n});if(0===a.length)return t.data;var u={date:function(e,n,r){return"function"===typeof t.dimensions[n].yscale.bandwidth?o[r][0]<=t.dimensions[n].yscale(e[n])&&t.dimensions[n].yscale(e[n])<=o[r][1]:o[r][0]<=e[n]&&e[n]<=o[r][1]},number:function(e,n,r){return"function"===typeof t.dimensions[n].yscale.bandwidth?o[r][0]<=t.dimensions[n].yscale(e[n])&&t.dimensions[n].yscale(e[n])<=o[r][1]:o[r][0]<=e[n]&&e[n]<=o[r][1]},string:function(e,n,r){return o[r][0]<=t.dimensions[n].yscale(e[n])&&t.dimensions[n].yscale(e[n])<=o[r][1]}};return t.data.filter(function(e){switch(n.predicate){case"AND":return a.every(function(n,r){return u[t.dimensions[n].type](e,n,r)});case"OR":return a.some(function(n,r){return u[t.dimensions[n].type](e,n,r)});default:throw new Error("Unknown brush predicate "+t.brushPredicate)}})}},w=function(e,t,n,r){return function(i){e.brushed=i,n.call("brush",t,e.brushed,r),t.renderBrushed()}},x=function(e,t,n,s,a){return function(o,u){if(!t.dimensions.hasOwnProperty(o))return function(){};var l="string"===t.dimensions[o].type?t.dimensions[o].yscale.range()[t.dimensions[o].yscale.range().length-1]:t.dimensions[o].yscale.range()[0],c=Object(i["b"])(u).extent([[-15,0],[15,l]]),h=function(e){var n=Array.prototype.slice.call(e),r=n[0],s=Object(i["a"])(n[2][0])||[],a=null;t.dimensions.hasOwnProperty(r)&&(a=t.dimensions[r].yscale);var o=g(s,a);return{axis:n[0],node:n[2][0],selection:{raw:s,scaled:o}}};return c.on("start",function(){null!==r["b"].sourceEvent&&(s.call("brushstart",n,t.brushed,h(arguments)),"function"===typeof r["b"].sourceEvent.stopPropagation&&r["b"].sourceEvent.stopPropagation())}).on("brush",function(){w(t,n,s,h(arguments))(y(e,t,a)())}).on("end",function(){w(t,n,s)(y(e,t,a)()),s.call("brushend",n,t.brushed,h(arguments))}),e.brushes[o]=c,e.brushNodes[o]=u.node(),c}},O=function(e,t,n,i,s){return function(){n.g()||n.createAxes();var a=n.g().append("svg:g").attr("class","brush").each(function(a){Object(r["f"])(this).call(x(e,t,n,i,s)(a,Object(r["f"])(this)))});return a.selectAll("rect").style("visibility",null).attr("x",-15).attr("width",30),a.selectAll("rect.background").style("fill","transparent"),a.selectAll("rect.extent").style("fill","rgba(255,255,255,0.25)").style("stroke","rgba(0,0,0,0.6)"),a.selectAll(".resize rect").style("fill","rgba(0,0,0,0.1)"),n.brushExtents=v(e,t,n),n.brushReset=b(e,t,n),n}},j=function(e,t){return function(){void 0!==t.g()&&null!==t.g()&&t.g().selectAll(".brush").remove(),e.brushes={},delete t.brushExtents,delete t.brushReset}},A=function(e,t,n,r){var i={brushes:{},brushNodes:{}};e.modes["1D-axes"]={install:O(i,t,n,r,e),uninstall:j(i,n),selected:y(i,t,e),brushState:v(i,t,n)}},M=function(e,t,n,i,s){var a=s.selectAll(".brush").data(e,function(e){return e.id});a.enter().insert("g",".brush").attr("class","brush").attr("dimension",i).attr("id",function(e){return"brush-"+Object.keys(t.dimensions).indexOf(i)+"-"+e.id}).each(function(e){e.brush(Object(r["f"])(this))}),a.each(function(t){Object(r["f"])(this).attr("class","brush").selectAll(".overlay").style("pointer-events",function(){var n=t.brush;return t.id===e.length-1&&void 0!==n?"all":"none"})}),a.exit().remove()},S=function(e,t,n,r,s){var a=e.brushes,o=function(e,t){for(var n=a[e],r=0;r<n.length;r++){var s=document.getElementById("brush-"+t+"-"+r);if(null!==Object(i["a"])(s))return!0}return!1},u=Object.keys(t.dimensions).filter(o),l=u.map(function(e){var n=a[e];return n.map(function(n,r){return Object(i["a"])(document.getElementById("brush-"+Object.keys(t.dimensions).indexOf(e)+"-"+r))}).map(function(n,r){return null===n||void 0===n?null:"function"===typeof t.dimensions[e].yscale.invert?[t.dimensions[e].yscale.invert(n[1]),t.dimensions[e].yscale.invert(n[0])]:n})});if(0===u.length)return t.data;var c={date:function(e,n,r){var i=l[r];if("function"===typeof t.dimensions[n].yscale.bandwidth){var s=!0,a=!1,o=void 0;try{for(var u,c=i[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var h=u.value;if(null!==h&&void 0!==h&&(h[0]<=t.dimensions[n].yscale(e[n])&&t.dimensions[n].yscale(e[n])<=h[1]))return!0}}catch(b){a=!0,o=b}finally{try{!s&&c.return&&c.return()}finally{if(a)throw o}}return!1}var d=!0,f=!1,m=void 0;try{for(var g,v=i[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=g.value;if(null!==p&&void 0!==p&&(p[0]<=e[n]&&e[n]<=p[1]))return!0}}catch(b){f=!0,m=b}finally{try{!d&&v.return&&v.return()}finally{if(f)throw m}}return!1},number:function(e,n,r){var i=l[r];if("function"===typeof t.dimensions[n].yscale.bandwidth){var s=!0,a=!1,o=void 0;try{for(var u,c=i[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var h=u.value;if(null!==h&&void 0!==h&&(h[0]<=t.dimensions[n].yscale(e[n])&&t.dimensions[n].yscale(e[n])<=h[1]))return!0}}catch(b){a=!0,o=b}finally{try{!s&&c.return&&c.return()}finally{if(a)throw o}}return!1}var d=!0,f=!1,m=void 0;try{for(var g,v=i[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=g.value;if(null!==p&&void 0!==p&&(p[0]<=e[n]&&e[n]<=p[1]))return!0}}catch(b){f=!0,m=b}finally{try{!d&&v.return&&v.return()}finally{if(f)throw m}}return!1},string:function(e,n,r){var i=l[r],s=!0,a=!1,o=void 0;try{for(var u,c=i[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var h=u.value;if(null!==h&&void 0!==h&&(h[0]<=t.dimensions[n].yscale(e[n])&&t.dimensions[n].yscale(e[n])<=h[1]))return!0}}catch(d){a=!0,o=d}finally{try{!s&&c.return&&c.return()}finally{if(a)throw o}}return!1}};return t.data.filter(function(e){switch(s.predicate){case"AND":return u.every(function(n,r){return c[t.dimensions[n].type](e,n,r)});case"OR":return u.some(function(n,r){return c[t.dimensions[n].type](e,n,r)});default:throw new Error("Unknown brush predicate "+t.brushPredicate)}})},_=function(e,t,n){return function(r){e.brushed=r,n.call("brush",t,e.brushed),t.renderBrushed()}},E=function e(t,n,s,a,o){return function(u,l){var c=t.brushes,h=t.brushNodes,d="string"===n.dimensions[u].type?n.dimensions[u].yscale.range()[n.dimensions[u].yscale.range().length-1]:n.dimensions[u].yscale.range()[0],f=Object(i["b"])().extent([[-15,0],[15,d]]),m=c[u]?c[u].length:0,g="brush-"+Object.keys(n.dimensions).indexOf(u)+"-"+m;return c[u]?c[u].push({id:m,brush:f,node:g}):c[u]=[{id:m,brush:f,node:g}],h[u]?h[u].push({id:m,node:g}):h[u]=[{id:m,node:g}],f.on("start",function(){null!==r["b"].sourceEvent&&(a.call("brushstart",s,n.brushed),"function"===typeof r["b"].sourceEvent.stopPropagation&&r["b"].sourceEvent.stopPropagation())}).on("brush",function(e){_(n,s,a)(S(t,n,s,a,o))}).on("end",function(){var h=c[u][c[u].length-1].id,d=document.getElementById("brush-"+Object.keys(n.dimensions).indexOf(u)+"-"+h),f=Object(i["a"])(d);void 0!==f&&null!==f&&f[0]!==f[1]?(e(t,n,s,a,o)(u,l),M(c[u],n,s,u,l),_(n,s,a)(S(t,n,s,a,o))):r["b"].sourceEvent&&"[object MouseEvent]"===r["b"].sourceEvent.toString()&&null===r["b"].selection&&s.brushReset(u),a.call("brushend",s,n.brushed)}),f}},D=function(e,t,n,s,a){return function(o){var u=e.brushes;return"undefined"===typeof o?Object.keys(t.dimensions).reduce(function(e,n,r){var s=u[n];return e[n]=void 0===s||null===s?[]:s.reduce(function(e,s,a){var o=Object(i["a"])(document.getElementById("brush-"+r+"-"+a));if(o){var u=t.dimensions[n].yscale,l=g(o,u);e.push({extent:s.brush.extent(),selection:{raw:o,scaled:l}})}return e},[]),e},{}):(Object.keys(t.dimensions).forEach(function(i,l){if(void 0!==o[i]&&null!==o[i]){var c=t.dimensions[i],h=o[i].map(function(e){return e.map(c.yscale)}),d=h.map(function(o,u){var c=E(e,t,n,s,a)(i,Object(r["f"])("#brush-group-"+l));return c.extent([[-15,o[1]],[15,o[0]]]),{id:u,brush:c,ext:o}});u[i]=d,M(d,t,n,i,Object(r["f"])("#brush-group-"+l)),d.forEach(function(e,t){Object(r["f"])("#brush-"+l+"-"+t).call(e.brush).call(e.brush.move,e.ext.reverse())})}}),n.renderBrushed(),n)}},P=void 0,R=function(e,t,n){return function(s){var a=e.brushes;if(void 0===s)void 0!==n.g()&&null!==n.g()&&(Object.keys(t.dimensions).forEach(function(e,t){var r=a[e];r.forEach(function(e,r){var s=document.getElementById("brush-"+t+"-"+r);null!==Object(i["a"])(s)&&n.g().select("#brush-"+t+"-"+r).call(e.brush.move,null)})}),n.renderBrushed());else if(void 0!==n.g()&&null!==n.g()){var o=a[s],u=Object.keys(t.dimensions).indexOf(s);o.forEach(function(e,t){var s=document.getElementById("brush-"+u+"-"+t);null!==Object(i["a"])(s)&&(n.g().select("#brush-"+u+"-"+t).call(e.brush.move,null),"function"===typeof e.event&&e.event(Object(r["f"])("#brush-"+u+"-"+t)))}),n.renderBrushed()}return P}},T=function(e,t,n,r,i){return function(s,a){var o=e.brushes;E(e,t,n,r,i)(s,a),M(o[s],t,n,s,a)}},N=function(e,t,n,i,s){return function(){return n.g()||n.createAxes(),n.g().append("svg:g").attr("id",function(e,t){return"brush-group-"+t}).attr("class","brush-group").attr("dimension",function(e){return e}).each(function(a){T(e,t,n,i,s)(a,Object(r["f"])(this))}),n.brushExtents=D(e,t,n,i,s),n.brushReset=R(e,t,n),n}},C=function(e,t){return function(){void 0!==t.g()&&null!==t.g()&&t.g().selectAll(".brush-group").remove(),e.brushes={},delete t.brushExtents,delete t.brushReset}},I=function(e,t,n,r){var i={brushes:{},brushNodes:{}};e.modes["1D-axes-multi"]={install:N(i,t,n,r,e),uninstall:C(i,n),selected:S(i,t,e),brushState:D(i,t,n)}},B=function(e,t){return function(){t.selection.select("svg").select("g#strums").remove(),t.selection.select("svg").select("rect#strum-events").remove(),t.on("axesreorder.strums",void 0),delete t.brushReset,e.strumRect=void 0}},X=function(e,t){return function(n){var r=[e.p1[0]-e.minX,e.p1[1]-e.minX],i=[e.p2[0]-e.minX,e.p2[1]-e.minX],s=1-t/r[0],a=r[1]*(1-s),o=1-t/i[0],u=i[1]*(1-o),l=n[0],c=n[1],h=s*l+a,d=o*l+u;return c>Math.min(h,d)&&c<Math.max(h,d)}},q=function(e,t){return function(n,r){var i=e.strums[r],s=X(i,e.strums.width(r)),a=i.dims.left,o=i.dims.right,u=t.dimensions[a].yscale,l=t.dimensions[o].yscale,c=[u(n[a])-i.minX,l(n[o])-i.minX];return s(c)}},z=function(e,t,n){var r=Object.getOwnPropertyNames(t.strums).filter(function(e){return!isNaN(e)}),i=n.data;if(0===r.length)return i;var s=q(t,n);return i.filter(function(t){switch(e.predicate){case"AND":return r.every(function(e){return s(t,e)});case"OR":return r.some(function(e){return s(t,e)});default:throw new Error("Unknown brush predicate "+n.brushPredicate)}})},F=function(e,t){var n=e.strums[e.strums.active],r=t.selection.select("svg").select("g#strums");delete e.strums[e.strums.active],r.selectAll("line#strum-"+n.dims.i).remove(),r.selectAll("circle#strum-"+n.dims.i).remove()},V=function(e,t,n,r,i){return function(){var s=t.strums[t.strums.active];s&&s.p1[0]===s.p2[0]&&s.p1[1]===s.p2[1]&&F(t,r);var a=z(e,t,n);t.strums.active=void 0,n.brushed=a,r.renderBrushed(),i.call("brushend",r,n.brushed)}},L=function e(t,n,i,a,o,u,l){var c=a.selection.select("svg").select("g#strums"),h=u.dims.i,d=[u.p1,u.p2],f=c.selectAll("line#strum-"+h).data([u]),m=c.selectAll("circle#strum-"+h).data(d),g=Object(s["a"])();f.enter().append("line").attr("id","strum-"+h).attr("class","strum"),f.attr("x1",function(e){return e.p1[0]}).attr("y1",function(e){return e.p1[1]}).attr("x2",function(e){return e.p2[0]}).attr("y2",function(e){return e.p2[1]}).attr("stroke","black").attr("stroke-width",2),g.on("drag",function(s,l){var c=r["b"];l+=1,u["p"+l][0]=Math.min(Math.max(u.minX+1,c.x),u.maxX),u["p"+l][1]=Math.min(Math.max(u.minY,c.y),u.maxY),e(t,n,i,a,o,u,l-1)}).on("end",V(t,n,i,a,o)),m.enter().append("circle").attr("id","strum-"+h).attr("class","strum"),m.attr("cx",function(e){return e[0]}).attr("cy",function(e){return e[1]}).attr("r",5).style("opacity",function(e,t){return void 0!==l&&t===l?.8:0}).on("mouseover",function(){Object(r["f"])(this).style("opacity",.8)}).on("mouseout",function(){Object(r["f"])(this).style("opacity",0)}).call(g)},K=function(e,t,n,i,s){return function(){var a=r["b"],o=t.strums[t.strums.active];o.p2[0]=Math.min(Math.max(o.minX+1,a.x-n.margin.left),o.maxX),o.p2[1]=Math.min(Math.max(o.minY,a.y-n.margin.top),o.maxY),L(e,t,n,i,s,o,1)}},Y=function(e){return e.height-e.margin.top-e.margin.bottom},W=function(e,t,n,r){var i={i:-1,left:void 0,right:void 0};return Object.keys(e.dimensions).some(function(s,a){return!(n(s)<r[0])||(i.i=a,i.left=s,i.right=Object.keys(e.dimensions)[t.getOrderedDimensionKeys().indexOf(s)+1],!1)}),void 0===i.left?(i.i=0,i.left=t.getOrderedDimensionKeys()[0],i.right=t.getOrderedDimensionKeys()[1]):void 0===i.right&&(i.i=Object.keys(e.dimensions).length-1,i.right=i.left,i.left=t.getOrderedDimensionKeys()[Object.keys(e.dimensions).length-2]),i},U=function(e,t,n,i){return function(){var s=Object(r["d"])(e.strumRect.node());s[0]=s[0]-t.margin.left,s[1]=s[1]-t.margin.top;var a=W(t,n,i,s),o={p1:s,dims:a,minX:i(a.left),maxX:i(a.right),minY:0,maxY:Y(t)};o.p1[0]=Math.min(Math.max(o.minX,s[0]),o.maxX),o.p2=o.p1.slice(),e.strums[a.i]=o,e.strums.active=a.i}},Z=function(e,t,n,r,i){return function(){var s=Object.getOwnPropertyNames(t.strums).filter(function(e){return!isNaN(e)});s.forEach(function(e){t.strums.active=e,F(t,r)}),V(e,t,n,r,i)()}},H=function(e){return function(t,n){var r=Object.keys(e);return r.some(function(i,s){return i===t&&(s+s<r.length&&e[s+1]===n)})}},J=function(e,t,n,r,i,a){return function(){void 0!==r.g()&&null!==r.g()||r.createAxes();var o=Object(s["a"])();t.strums.active=void 0,t.strums.width=function(e){return void 0===t.strums[e]?void 0:t.strums[e].maxX-t.strums[e].minX},r.on("axesreorder.strums",function(){var s=Object.getOwnPropertyNames(t.strums).filter(function(e){return!isNaN(e)});s.length>0&&(s.forEach(function(e){var i=t.strums[e].dims;t.strums.active=e,H(n.dimensions)(i.left,i.right)||F(t,r)}),V(e,t,n,r,i)())}),r.selection.select("svg").append("g").attr("id","strums").attr("transform","translate("+n.margin.left+","+n.margin.top+")"),r.brushReset=Z(e,t,n,r,i),o.on("start",U(t,n,r,a)).on("drag",K(e,t,n,r,i)).on("end",V(e,t,n,r,i)),t.strumRect=r.selection.select("svg").insert("rect","g#strums").attr("id","strum-events").attr("x",n.margin.left).attr("y",n.margin.top).attr("width",f(n)).attr("height",Y(n)+2).style("opacity",0).call(o)}},G=function(e,t,n,r,i){var s={strums:{},strumRect:{}};e.modes["2D-strums"]={install:J(e,s,t,n,r,i),uninstall:B(s,n),selected:z(e,s,t),brushState:function(){return s.strums}}},Q=function(e,t){return function(){t.selection.select("svg").select("g#arcs").remove(),t.selection.select("svg").select("rect#arc-events").remove(),t.on("axesreorder.arcs",void 0),delete t.brushReset,e.strumRect=void 0}},$=function(e,t){return Math.sqrt(e*e+t*t)},ee=function(e){return e>Math.PI?1.5*Math.PI-e:.5*Math.PI-e},te=function(e){return function(t){var n=ee(e.startAngle),r=ee(e.endAngle);if(n>r){var i=n;n=r,r=i}return t>=n&&t<=r}},ne=function(e,t){return function(n,r){var i=e.arcs[r],s=te(i),a=i.dims.left,o=i.dims.right,u=t.dimensions[a].yscale,l=t.dimensions[o].yscale,c=e.arcs.width(r),h=u(n[a])-l(n[o]),d=$(c,h),f=Math.asin(h/d);return s(f)}},re=function(e,t,n){var r=Object.getOwnPropertyNames(t.arcs).filter(function(e){return!isNaN(e)}),i=n.data;if(0===r.length)return i;var s=ne(t,n);return i.filter(function(t){switch(e.predicate){case"AND":return r.every(function(e){return s(t,e)});case"OR":return r.some(function(e){return s(t,e)});default:throw new Error("Unknown brush predicate "+n.brushPredicate)}})},ie=function(e,t){var n=e.arcs[e.arcs.active],r=t.selection.select("svg").select("g#arcs");delete e.arcs[e.arcs.active],e.arcs.active=void 0,r.selectAll("line#arc-"+n.dims.i).remove(),r.selectAll("circle#arc-"+n.dims.i).remove(),r.selectAll("path#arc-"+n.dims.i).remove()},se=function(e,t,n,r,i){return function(){var s=t.arcs[t.arcs.active];if(s&&s.p1[0]===s.p2[0]&&s.p1[1]===s.p2[1]&&ie(t,r),s){var a=t.arcs.startAngle(t.arcs.active);s.startAngle=a,s.endAngle=a,s.arc.outerRadius(t.arcs.length(t.arcs.active)).startAngle(a).endAngle(a)}t.arcs.active=void 0,n.brushed=re(e,t,n),r.renderBrushed(),i.call("brushend",r,n.brushed)}},ae=function e(t,n,i,a,o,u,l){var c=a.selection.select("svg").select("g#arcs"),h=u.dims.i,d=[u.p2,u.p3],f=c.selectAll("line#arc-"+h).data([{p1:u.p1,p2:u.p2},{p1:u.p1,p2:u.p3}]),m=c.selectAll("circle#arc-"+h).data(d),g=Object(s["a"])(),v=c.selectAll("path#arc-"+h).data([u]);v.enter().append("path").attr("id","arc-"+h).attr("class","arc").style("fill","orange").style("opacity",.5),v.attr("d",u.arc).attr("transform","translate("+u.p1[0]+","+u.p1[1]+")"),f.enter().append("line").attr("id","arc-"+h).attr("class","arc"),f.attr("x1",function(e){return e.p1[0]}).attr("y1",function(e){return e.p1[1]}).attr("x2",function(e){return e.p2[0]}).attr("y2",function(e){return e.p2[1]}).attr("stroke","black").attr("stroke-width",2),g.on("drag",function(s,l){var c=r["b"];l+=2,u["p"+l][0]=Math.min(Math.max(u.minX+1,c.x),u.maxX),u["p"+l][1]=Math.min(Math.max(u.minY,c.y),u.maxY);var d=3===l?n.arcs.startAngle(h):n.arcs.endAngle(h);(u.startAngle<Math.PI&&u.endAngle<Math.PI&&d<Math.PI||u.startAngle>=Math.PI&&u.endAngle>=Math.PI&&d>=Math.PI)&&(2===l?(u.endAngle=d,u.arc.endAngle(d)):3===l&&(u.startAngle=d,u.arc.startAngle(d))),e(t,n,i,a,o,u,l-2)}).on("end",se(t,n,i,a,o)),m.enter().append("circle").attr("id","arc-"+h).attr("class","arc"),m.attr("cx",function(e){return e[0]}).attr("cy",function(e){return e[1]}).attr("r",5).style("opacity",function(e,t){return void 0!==l&&t===l?.8:0}).on("mouseover",function(){Object(r["f"])(this).style("opacity",.8)}).on("mouseout",function(){Object(r["f"])(this).style("opacity",0)}).call(g)},oe=function(e,t,n,i,s){return function(){var a=r["b"],o=t.arcs[t.arcs.active];o.p2[0]=Math.min(Math.max(o.minX+1,a.x-n.margin.left),o.maxX),o.p2[1]=Math.min(Math.max(o.minY,a.y-n.margin.top),o.maxY),o.p3=o.p2.slice(),ae(e,t,n,i,s,o,1)}},ue=function(e,t,n,i){return function(){var s=Object(r["d"])(e.strumRect.node());s[0]=s[0]-t.margin.left,s[1]=s[1]-t.margin.top;var o=W(t,n,i,s),u={p1:s,dims:o,minX:i(o.left),maxX:i(o.right),minY:0,maxY:Y(t),startAngle:void 0,endAngle:void 0,arc:Object(a["a"])().innerRadius(0)};u.p1[0]=Math.min(Math.max(u.minX,s[0]),u.maxX),u.p2=u.p1.slice(),u.p3=u.p1.slice(),e.arcs[o.i]=u,e.arcs.active=o.i}},le=function(e,t,n,r,i){return function(){var s=Object.getOwnPropertyNames(t.arcs).filter(function(e){return!isNaN(e)});s.forEach(function(e){t.arcs.active=e,ie(t,r)}),se(e,t,n,r,i)()}},ce=function(e,t){var n=e[0]-t[0],r=e[1]-t[1],i=$(n,r);return Math.asin(r/i)},he=function(e){return function(t){var n=e.arcs[t];if(void 0!==n){var r=ce(n.p1,n.p2),i=-r+Math.PI/2;return n.p1[0]>n.p2[0]&&(i=2*Math.PI-i),i}}},de=function(e){return function(t){var n=e.arcs[t];if(void 0!==n){var r=ce(n.p1,n.p3),i=-r+Math.PI/2;return n.p1[0]>n.p3[0]&&(i=2*Math.PI-i),i}}},fe=function(e){return function(t){var n=e.arcs[t];if(void 0!==n){var r=n.p1[0]-n.p2[0],i=n.p1[1]-n.p2[1];return $(r,i)}}},me=function(e,t,n,r,i,a){return function(){r.g()||r.createAxes();var o=Object(s["a"])();t.arcs.active=void 0,t.arcs.width=function(e){var n=t.arcs[e];return void 0===n?void 0:n.maxX-n.minX},t.arcs.endAngle=he(t),t.arcs.startAngle=de(t),t.arcs.length=fe(t),r.on("axesreorder.arcs",function(){var s=Object.getOwnPropertyNames(arcs).filter(function(e){return!isNaN(e)});s.length>0&&(s.forEach(function(e){var n=arcs[e].dims;t.arcs.active=e,H(n)(n.left,n.right)||ie(t,r)}),se(e,t,n,r,i)())}),r.selection.select("svg").append("g").attr("id","arcs").attr("transform","translate("+n.margin.left+","+n.margin.top+")"),r.brushReset=le(e,t,n,r,i),o.on("start",ue(t,n,r,a)).on("drag",oe(e,t,n,r,i)).on("end",se(e,t,n,r,i)),t.strumRect=r.selection.select("svg").insert("rect","g#arcs").attr("id","arc-events").attr("x",n.margin.left).attr("y",n.margin.top).attr("width",f(n)).attr("height",Y(n)+2).style("opacity",0).call(o)}},ge=function(e,t,n,r,i){var s={arcs:{},strumRect:{}};e.modes["angular"]={install:me(e,s,t,n,r,i),uninstall:Q(s,n),selected:re(e,s,t),brushState:function(){return s.arcs}}},ve=function(e,t,n,r){return{x:((e.x*t.y-e.y*t.x)*(n.x-r.x)-(e.x-t.x)*(n.x*r.y-n.y*r.x))/((e.x-t.x)*(n.y-r.y)-(e.y-t.y)*(n.x-r.x)),y:((e.x*t.y-e.y*t.x)*(n.y-r.y)-(e.y-t.y)*(n.x*r.y-n.y*r.x))/((e.x-t.x)*(n.y-r.y)-(e.y-t.y)*(n.x-r.x))}},pe=function(e){return function(t){var n=window.devicePixelRatio||1,i=document.createElement("canvas"),s=e.canvas.foreground,a=Number(s.style.marginLeft.replace("px","")),o=15,u=Number(s.style.marginTop.replace("px",""))+o,l=(s.clientWidth+a)*n,c=(s.clientHeight+u)*n;i.width=l+50,i.height=c+30,i.style.width=i.width/n+"px",i.style.height=i.height/n+"px";var h=i.getContext("2d");for(var d in h.fillStyle="#ffffff",h.fillRect(0,0,i.width,i.height),e.canvas)h.drawImage(e.canvas[d],a*n,u*n,l-a*n,c-u*n);window.URL||window.webkitURL||window;var f=new XMLSerializer,m=e.selection.select("svg").node().cloneNode(!0);m.setAttribute("transform","translate(0,"+o+")"),m.setAttribute("height",m.getAttribute("height")+o),Object(r["f"])(m).selectAll("text").attr("fill","black");var g=f.serializeToString(m),v="data:image/svg+xml;base64,"+window.btoa(g),p=new Image;p.onload=function(){h.drawImage(p,0,0,p.width*n,p.height*n),"function"===typeof t&&t(i)},p.src=v}},be=function(e,t){return function(){var n=[],r=[],s={};if(0===e.brushes.length){for(var a=t.g().selectAll(".brush").nodes(),o=0;o<a.length;o++)if(null!==Object(i["a"])(a[o])){n.push(a[o].__data__);var u=[],l=Object(i["a"])(a[o]);if("number"===typeof e.dimensions[a[o].__data__].yscale.domain()[0]){for(var c=0;c<l.length;c++)n.includes(a[o].__data__)&&e.flipAxes.includes(a[o].__data__)?u.push(e.dimensions[a[o].__data__].yscale.invert(l[c])):1!==e.dimensions[a[o].__data__].yscale()&&u.unshift(e.dimensions[a[o].__data__].yscale.invert(l[c]));r.push(u);for(var h=0;h<r.length;h++)0===r[h].length&&(r[h]=[1,1])}else{s[a[o].__data__]=Object(i["a"])(a[o]);for(var d=e.dimensions[a[o].__data__].yscale.range(),f=(e.dimensions[a[o].__data__].yscale.domain(),0);f<d.length;f++)d[f]>=l[0]&&d[f]<=l[1]&&n.includes(a[o].__data__)&&e.flipAxes.includes(a[o].__data__)?u.push(d[f]):d[f]>=l[0]&&d[f]<=l[1]&&u.unshift(d[f]);r.push(u);for(var m=0;m<r.length;m++)0===r[m].length&&(r[m]=[1,1])}}var g={date:function(t,n,r){var i=t[n],a=e.dimensions[n].yscale.domain().indexOf(i),o=e.dimensions[n].yscale.range()[a];return o>=s[n][0]&&o<=s[n][1]},number:function(e,t,n){return r[n][0]<=e[t]&&e[t]<=r[n][1]},string:function(t,n,r){var i=t[n],a=e.dimensions[n].yscale.domain().indexOf(i),o=e.dimensions[n].yscale.range()[a];return o>=s[n][0]&&o<=s[n][1]}};return e.data.filter(function(t){return n.every(function(n,r){return g[e.dimensions[n].type](t,n,r)})})}for(var v=[],p=function(t){var n=e.brushes[t],i=[],a=n.extent,o=[n.data];if("number"===typeof e.dimensions[n.data].yscale.domain()[0]){for(var u=0;u<a.length;u++)o.includes(n.data)&&e.flipAxes.includes(n.data)?i.push(e.dimensions[n.data].yscale.invert(a[u])):1!==e.dimensions[n.data].yscale()&&i.unshift(e.dimensions[n.data].yscale.invert(a[u]));r.push(i);for(var l=0;l<r.length;l++)0===r[l].length&&(r[l]=[1,1])}else{s[n.data]=n.extent;for(var c=e.dimensions[n.data].yscale.range(),h=(e.dimensions[n.data].yscale.domain(),0);h<c.length;h++)c[h]>=a[0]&&c[h]<=a[1]&&o.includes(n.data)&&e.flipAxes.includes(n.data)?i.push(c[h]):c[h]>=a[0]&&c[h]<=a[1]&&i.unshift(c[h]);r.push(i);for(var d=0;d<r.length;d++)0===r[d].length&&(r[d]=[1,1])}for(var f={date:function(t,n,r){var i=t[n],a=e.dimensions[n].yscale.domain().indexOf(i),o=e.dimensions[n].yscale.range()[a];return o>=s[n][0]&&o<=s[n][1]},number:function(e,n,i){return r[t][0]<=e[n]&&e[n]<=r[t][1]},string:function(t,n,r){var i=t[n],a=e.dimensions[n].yscale.domain().indexOf(i),o=e.dimensions[n].yscale.range()[a];return o>=s[n][0]&&o<=s[n][1]}},m=e.data.filter(function(t){return o.every(function(n,r){return f[e.dimensions[n].type](t,n,r)})}),g=0;g<m.length;g++)v.push(m[g]);o=[],s={}},b=0;b<e.brushes.length;b++)p(b);return v}},ye=function(e,t,n){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===r)return e.predicate;if(r=String(r).toUpperCase(),"AND"!==r&&"OR"!==r)throw new Error("Invalid predicate "+r);return e.predicate=r,t.brushed=e.currentMode().selected(),n.renderBrushed(),n}},ke=function(e,t,n){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===r)return e.mode;if(-1===n.brushModes().indexOf(r))throw new Error("pc.brushmode: Unsupported brush mode: "+r);return r!==e.mode&&("None"!==e.mode&&n.brushReset(),e.modes[e.mode].uninstall(n),e.mode=r,e.modes[e.mode].install(),"None"===r?delete n.brushPredicate:n.brushPredicate=ye(e,t,n)),n}},we=function(e){return function(t){return e.dimensions[t].title?e.dimensions[t].title:t}},xe=function(e,t,n){return function(r){t.flip(r),t.brushReset(r),t.selection.select("svg").selectAll("g.axis").filter(function(e){return e===r}).transition().duration(e.animationTime).call(n.scale(e.dimensions[r].yscale)),t.render()}},Oe=function(e,t){if(e.rotateLabels){var n=r["b"].deltaY;n=n<0?-5:n,n=n>0?5:n,e.dimensionTitleRotation+=n,t.svg.selectAll("text.label").attr("transform","translate(0,-5) rotate("+e.dimensionTitleRotation+")"),r["b"].preventDefault()}},je=void 0,Ae=function(e,t,n,i,s){return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===a&&(a=e.animationTime);var o=t.svg.selectAll(".dimension").data(t.getOrderedDimensionKeys());o.enter().append("svg:g").attr("class","dimension").attr("transform",function(e){return"translate("+n(e)+")"}).style("opacity",0).append("svg:g").attr("class","axis").attr("transform","translate(0,0)").each(function(n){var s=Object(r["f"])(this).call(t.applyAxisConfig(i,e.dimensions[n]));s.selectAll("path").style("fill","none").style("stroke","#222").style("shape-rendering","crispEdges"),s.selectAll("line").style("fill","none").style("stroke","#222").style("shape-rendering","crispEdges")}).append("svg:text").attr("text-anchor","middle").attr("class","label").attr("x",0).attr("y",0).attr("transform","translate(0,-5) rotate("+e.dimensionTitleRotation+")").text(we(e)).on("dblclick",xe(e,t,i)).on("wheel",Oe(e,t)),o.attr("opacity",0),o.select(".axis").transition().duration(a).each(function(n){Object(r["f"])(this).call(t.applyAxisConfig(i,e.dimensions[n]))}),o.select(".label").transition().duration(a).text(we(e)).attr("transform","translate(0,-5) rotate("+e.dimensionTitleRotation+")"),o.exit().remove();var u=t.svg.selectAll(".dimension");if(u.transition().duration(a).attr("transform",function(e){return"translate("+n(e)+")"}).style("opacity",1),t.svg.selectAll(".axis").transition().duration(a).each(function(n){Object(r["f"])(this).call(t.applyAxisConfig(i,e.dimensions[n]))}),s.brushable&&t.brushable(),s.reorderable&&t.reorderable(),"None"!==t.brushMode()){var l=t.brushMode();t.brushMode("None"),t.brushMode(l)}return je}},Me=function(e){var t=e.height-e.margin.top-e.margin.bottom;return"bottom"==e.nullValueSeparator?[t+1-e.nullValueSeparatorPadding.bottom-e.nullValueSeparatorPadding.top,1]:"top"==e.nullValueSeparator?[t+1,1+e.nullValueSeparatorPadding.bottom+e.nullValueSeparatorPadding.top]:[t+1,1]},Se=function(e,t,n,r){return function(){var i={date:function(t){var n=Object(u["d"])(e.data,function(e){return e[t]?e[t].getTime():null});return n[0]===n[1]?Object(o["c"])().domain(n).range(Me(e)):(e.flipAxes.includes(t)&&(n=n.map(function(e){return tempDate.unshift(e)})),Object(o["d"])().domain(n).range(Me(e)))},number:function(t){var n=Object(u["d"])(e.data,function(e){return+e[t]});return n[0]===n[1]?Object(o["c"])().domain(n).range(Me(e)):(e.flipAxes.includes(t)&&(n=n.map(function(e){return tempDate.unshift(e)})),Object(o["a"])().domain(n).range(Me(e)))},string:function(t){var n={},r=[];if(e.data.map(function(r){if(void 0===r[t]&&"undefined"!==e.nullValueSeparator)return null;void 0===n[r[t]]?n[r[t]]=1:n[r[t]]=n[r[t]]+1}),e.flipAxes.includes(t))r=Object.getOwnPropertyNames(n).sort();else for(var i=Object.getOwnPropertyNames(n).sort(),s=0;s<Object.getOwnPropertyNames(n).length;s++)r.push(i.pop());var a=[];1===r.length&&(r=[" ",r[0]," "]);for(var u=Me(e)[0]/(r.length-1),l=0;l<r.length;l++)0!==a.length?a.push(a[l-1]+u):a.push(0);return Object(o["b"])().domain(r).range(a)}};Object.keys(e.dimensions).forEach(function(t){void 0!==e.dimensions[t].yscale&&null!==e.dimensions[t].yscale||(e.dimensions[t].yscale=i[e.dimensions[t].type](t))}),n.range([0,f(e)]).padding(.2);var s=window.devicePixelRatio||1;return t.selection.selectAll("canvas").style("margin-top",e.margin.top+"px").style("margin-left",e.margin.left+"px").style("width",f(e)+2+"px").style("height",Y(e)+2+"px").attr("width",(f(e)+2)*s).attr("height",(Y(e)+2)*s),r.foreground.strokeStyle=e.color,r.foreground.lineWidth=e.lineWidth,r.foreground.globalCompositeOperation=e.composite,r.foreground.globalAlpha=e.alpha,r.foreground.scale(s,s),r.brushed.strokeStyle=e.brushedColor,r.brushed.lineWidth=e.lineWidth,r.brushed.globalCompositeOperation=e.composite,r.brushed.globalAlpha=e.alpha,r.brushed.scale(s,s),r.highlight.lineWidth=e.highlightedLineWidth,r.highlight.scale(s,s),r.marked.lineWidth=e.markedLineWidth,r.marked.shadowColor=e.markedShadowColor,r.marked.shadowBlur=e.markedShadowBlur,r.marked.scale(s,s),this}},_e=function(e,t,n){return function(){t.g()||t.createAxes();var s=t.g();return s.append("svg:g").attr("class","brush").each(function(n){void 0!==e.dimensions[n]&&(e.dimensions[n]["brush"]=Object(i["b"])(Object(r["f"])(this)).extent([[-15,0],[15,e.dimensions[n].yscale.range()[0]]]),Object(r["f"])(this).call(e.dimensions[n]["brush"].on("start",function(){null===r["b"].sourceEvent||r["b"].sourceEvent.ctrlKey||t.brushReset()}).on("brush",function(){r["b"].sourceEvent.ctrlKey||t.brush()}).on("end",function(){if(r["b"].sourceEvent.ctrlKey){var s=Object(r["f"])(this).select(".selection").nodes()[0].outerHTML;s=s.replace('class="selection"','class="selection dummy selection-'+e.brushes.length+'"');var a=Object(r["f"])(this).nodes()[0].__data__,o={id:e.brushes.length,extent:Object(i["a"])(this),html:s,data:a};e.brushes.push(o),Object(r["f"])(Object(r["f"])(this).nodes()[0].parentNode).select(".axis").nodes()[0].outerHTML+=s,t.brush(),e.dimensions[n].brush.move(Object(r["f"])(this,null)),Object(r["f"])(this).select(".selection").attr("style","display:none"),t.brushable()}else t.brush()})),Object(r["f"])(this).on("dblclick",function(){t.brushReset(n)}))}),n.brushable=!0,this}},Ee=function(e,t){return function(n,r){var i=r||"number";"undefined"===typeof n&&(n=!0),Object.keys(e.dimensions).length||t.detectDimensions(),t.autoscale();var s=Object.keys(e.dimensions).filter(function(t){return e.dimensions[t].type==i});if(n){var a=Object(u["d"])(s.map(function(t){return e.dimensions[t].yscale.domain()}).reduce(function(e,t){return e.concat(t)}));s.forEach(function(t){e.dimensions[t].yscale.domain(a)})}else s.forEach(function(t){e.dimensions[t].yscale.domain(Object(u["d"])(e.data,function(e){return+e[k]}))});return null!==e.bundleDimension&&t.bundleDimension(e.bundleDimension),this}},De=function(e,t){return function(n){return Object.keys(e.dimensions).map(function(r){var i=t(r),s=e.dimensions[r].yscale(n[r]);return[i,s]})}},Pe=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Re=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ne=function(e){return null!==e&&void 0!==e},Ce=function(e,t){return function(n){var r=t.detectDimensionTypes(e.data);return n=n||Object.keys(r),n.reduce(function(t,n,i){var s=e.dimensions[n]?e.dimensions[n]:{};return t[n]=Te({},s,{orient:Ne(s.orient)?s.orient:"left",ticks:Ne(s.ticks)?s.ticks:5,innerTickSize:Ne(s.innerTickSize)?s.innerTickSize:6,outerTickSize:Ne(s.outerTickSize)?s.outerTickSize:0,tickPadding:Ne(s.tickPadding)?s.tickPadding:3,type:Ne(s.type)?s.type:r[n],index:Ne(s.index)?s.index:i}),t},{})}},Ie=function(e,t,n,i,s){return function(){return void 0!==t.g()&&t.removeAxes(),t._g=t.svg.selectAll(".dimension").data(t.getOrderedDimensionKeys(),function(e){return e}).enter().append("svg:g").attr("class","dimension").attr("transform",function(e){return"translate("+n(e)+")"}),t._g.append("svg:g").attr("class","axis").attr("transform","translate(0,0)").each(function(n){var i=Object(r["f"])(this).call(t.applyAxisConfig(s,e.dimensions[n]));i.selectAll("path").style("fill","none").style("stroke","#222").style("shape-rendering","crispEdges"),i.selectAll("line").style("fill","none").style("stroke","#222").style("shape-rendering","crispEdges")}).append("svg:text").attr("text-anchor","middle").attr("y",0).attr("transform","translate(0,-5) rotate("+e.dimensionTitleRotation+")").attr("x",0).attr("class","label").text(we(e)).on("dblclick",xe(e,t,s)).on("wheel",Oe(e,t)),"top"===e.nullValueSeparator?t.svg.append("line").attr("x1",0).attr("y1",1+e.nullValueSeparatorPadding.top).attr("x2",f(e)).attr("y2",1+e.nullValueSeparatorPadding.top).attr("stroke-width",1).attr("stroke","#777").attr("fill","none").attr("shape-rendering","crispEdges"):"bottom"===e.nullValueSeparator&&t.svg.append("line").attr("x1",0).attr("y1",Y(e)+1-e.nullValueSeparatorPadding.bottom).attr("x2",f(e)).attr("y2",Y(e)+1-e.nullValueSeparatorPadding.bottom).attr("stroke-width",1).attr("stroke","#777").attr("fill","none").attr("shape-rendering","crispEdges"),i.axes=!0,this}},Be=void 0,Xe=function(e,t,n){return function(r){var i=r||.1,s=t.ctx.dots,a=0,o=2*Math.PI;return s.globalAlpha=Object(u["g"])([1/Math.pow(e.data.length,.5),1]),e.data.forEach(function(t){Object(l["a"])(e.dimensions).forEach(function(r,u){s.beginPath(),s.arc(n(r),e.dimensions[r.key].yscale(t[r]),i,a,o),s.stroke(),s.fill()})}),Be}},qe=function(e,t){var n=void 0;switch(t.orient){case"left":n=Object(c["b"])(t.yscale);break;case"right":n=Object(c["c"])(t.yscale);break;case"top":n=Object(c["d"])(t.yscale);break;case"bottom":n=Object(c["a"])(t.yscale);break;default:n=Object(c["b"])(t.yscale);break}return n.ticks(t.ticks).tickValues(t.tickValues).tickSizeInner(t.innerTickSize).tickSizeOuter(t.outerTickSize).tickPadding(t.tickPadding).tickFormat(t.tickFormat),n},ze=function(e,t,n,i,a,o){return function(){void 0===t.g()&&t.createAxes();var u=t.g();return u.style("cursor","move").call(Object(s["a"])().on("start",function(e){a[e]=this.__origin__=n(e)}).on("drag",function(s){a[s]=Math.min(f(e),Math.max(0,this.__origin__+=r["b"].dx)),t.sortDimensions(),n.domain(t.getOrderedDimensionKeys()),t.render(),u.attr("transform",function(e){return"translate("+i(e)+")"})}).on("end",function(e){delete this.__origin__,delete a[e],Object(r["f"])(this).transition().attr("transform","translate("+n(e)+")"),t.render(),t.renderMarked()})),o.reorderable=!0,this}},Fe=function(e,t,n,r){return function(){return t.selection.select("svg").attr("width",e.width).attr("height",e.height),t.svg.attr("transform","translate("+e.margin.left+","+e.margin.top+")"),n.brushable&&t.brushReset(),t.autoscale(),t.g()&&t.createAxes(),n.brushable&&t.brushable(),n.reorderable&&t.reorderable(),r.call("resize",this,{width:e.width,height:e.height,margin:e.margin}),this}},Ve=function(e,t,n){return function(r){var i=t.getOrderedDimensionKeys()[0];t.sortDimensionsByRowData(r);var s=i!==t.getOrderedDimensionKeys()[0];if(s){n.domain(t.getOrderedDimensionKeys());var a=e.highlighted.slice(0);t.unhighlight();var o=e.marked.slice(0);t.unmark();var u=t.g();u.transition().duration(1500).attr("transform",function(e){return"translate("+n(e)+")"}),t.render(),0!==a.length&&t.highlight(a),0!==o.length&&t.mark(o)}}},Le=function(e,t){return function(){var n=Object.assign({},e.dimensions),r=Object.keys(e.dimensions).sort(function(e,n){return t(e)-t(n)===0?1:t(e)-t(n)});e.dimensions={},r.forEach(function(t,r){e.dimensions[t]=n[t],e.dimensions[t].index=r})}},Ke=function(e){return function(t){var n=Object.assign({},e.dimensions),r=Object.keys(e.dimensions).sort(function(n,r){var i=e.dimensions[n].yscale(t[n])-e.dimensions[r].yscale(t[r]);return 0===i?n.localeCompare(r):i});e.dimensions={},r.forEach(function(t,r){e.dimensions[t]=n[t],e.dimensions[t].index=r})}},Ye=function(e,t){if(e.brushed&&e.brushed.length!==e.data.length)return!0;var n=t.currentMode().brushState();for(var r in n)if(n.hasOwnProperty(r))return!0;return!1},We=function(e,t,n,r){return function(i){return n[i].clearRect(0,0,f(e)+2,Y(e)+2),"brushed"===i&&Ye(e,r)&&(n.brushed.fillStyle=t.selection.style("background-color"),n.brushed.globalAlpha=1-e.alphaOnBrushed,n.brushed.fillRect(0,0,f(e)+2,Y(e)+2),n.brushed.globalAlpha=e.alpha),this}},Ue=1e-6,Ze=function(){function e(t){Pe(this,e),this.setElements(t)}return Re(e,[{key:"e",value:function(e,t){return e<1||e>this.elements.length||t<1||t>this.elements[0].length?null:this.elements[e-1][t-1]}},{key:"row",value:function(e){return e>this.elements.length?null:new He(this.elements[e-1])}},{key:"col",value:function(e){if(0===this.elements.length)return null;if(e>this.elements[0].length)return null;for(var t=[],n=this.elements.length,r=0;r<n;r++)t.push(this.elements[r][e-1]);return new He(t)}},{key:"dimensions",value:function(){var e=0===this.elements.length?0:this.elements[0].length;return{rows:this.elements.length,cols:e}}},{key:"rows",value:function(){return this.elements.length}},{key:"cols",value:function(){return 0===this.elements.length?0:this.elements[0].length}},{key:"eql",value:function(t){var n=t.elements||t;if(n[0]&&"undefined"!==typeof n[0][0]||(n=new e(n).elements),0===this.elements.length||0===n.length)return this.elements.length===n.length;if(this.elements.length!==n.length)return!1;if(this.elements[0].length!==n[0].length)return!1;var r,i=this.elements.length,s=this.elements[0].length;while(i--){r=s;while(r--)if(Math.abs(this.elements[i][r]-n[i][r])>Ue)return!1}return!0}},{key:"dup",value:function(){return new e(this.elements)}},{key:"map",value:function(t,n){if(0===this.elements.length)return new e([]);var r,i=[],s=this.elements.length,a=this.elements[0].length;while(s--){r=a,i[s]=[];while(r--)i[s][r]=t.call(n,this.elements[s][r],s+1,r+1)}return new e(i)}},{key:"isSameSizeAs",value:function(t){var n=t.elements||t;return"undefined"===typeof n[0][0]&&(n=new e(n).elements),0===this.elements.length?0===n.length:this.elements.length===n.length&&this.elements[0].length===n[0].length}},{key:"add",value:function(t){if(0===this.elements.length)return this.map(function(e){return e});var n=t.elements||t;return"undefined"===typeof n[0][0]&&(n=new e(n).elements),this.isSameSizeAs(n)?this.map(function(e,t,r){return e+n[t-1][r-1]}):null}},{key:"subtract",value:function(t){if(0===this.elements.length)return this.map(function(e){return e});var n=t.elements||t;return"undefined"===typeof n[0][0]&&(n=new e(n).elements),this.isSameSizeAs(n)?this.map(function(e,t,r){return e-n[t-1][r-1]}):null}},{key:"canMultiplyFromLeft",value:function(t){if(0===this.elements.length)return!1;var n=t.elements||t;return"undefined"===typeof n[0][0]&&(n=new e(n).elements),this.elements[0].length===n.length}},{key:"multiply",value:function(t){if(0===this.elements.length)return null;if(!t.elements)return this.map(function(e){return e*t});var n=!!t.modulus,r=t.elements||t;if("undefined"===typeof r[0][0]&&(r=new e(r).elements),!this.canMultiplyFromLeft(r))return null;var i,s,a,o=this.elements.length,u=r[0].length,l=this.elements[0].length,c=[];while(o--){i=u,c[o]=[];while(i--){s=l,a=0;while(s--)a+=this.elements[o][s]*r[s][i];c[o][i]=a}}r=new e(c);return n?r.col(1):r}},{key:"minor",value:function(t,n,r,i){if(0===this.elements.length)return null;var s,a,o,u=[],l=r,c=this.elements.length,h=this.elements[0].length;while(l--){s=r-l-1,u[s]=[],a=i;while(a--)o=i-a-1,u[s][o]=this.elements[(t+s-1)%c][(n+o-1)%h]}return new e(u)}},{key:"transpose",value:function(){if(0===this.elements.length)return new e([]);var t,n=this.elements.length,r=this.elements[0].length,i=[],s=r;while(s--){t=n,i[s]=[];while(t--)i[s][t]=this.elements[t][s]}return new e(i)}},{key:"isSquare",value:function(){var e=0===this.elements.length?0:this.elements[0].length;return this.elements.length===e}},{key:"max",value:function(){if(0===this.elements.length)return null;var e,t=0,n=this.elements.length,r=this.elements[0].length;while(n--){e=r;while(e--)Math.abs(this.elements[n][e])>Math.abs(t)&&(t=this.elements[n][e])}return t}},{key:"indexOf",value:function(e){if(0===this.elements.length)return null;var t,n,r=this.elements.length,i=this.elements[0].length;for(t=0;t<r;t++)for(n=0;n<i;n++)if(this.elements[t][n]===e)return{i:t+1,j:n+1};return null}},{key:"diagonal",value:function(){if(!this.isSquare)return null;for(var e=[],t=this.elements.length,n=0;n<t;n++)e.push(this.elements[n][n]);return new He(e)}},{key:"toRightTriangular",value:function(){if(0===this.elements.length)return new e([]);var t,n,r,i,s=this.dup(),a=this.elements.length,o=this.elements[0].length;for(n=0;n<a;n++){if(0===s.elements[n][n])for(r=n+1;r<a;r++)if(0!==s.elements[r][n]){for(t=[],i=0;i<o;i++)t.push(s.elements[n][i]+s.elements[r][i]);s.elements[n]=t;break}if(0!==s.elements[n][n])for(r=n+1;r<a;r++){var u=s.elements[r][n]/s.elements[n][n];for(t=[],i=0;i<o;i++)t.push(i<=n?0:s.elements[r][i]-s.elements[n][i]*u);s.elements[r]=t}}return s}},{key:"determinant",value:function(){if(0===this.elements.length)return 1;if(!this.isSquare())return null;for(var e=this.toRightTriangular(),t=e.elements[0][0],n=e.elements.length,r=1;r<n;r++)t*=e.elements[r][r];return t}},{key:"isSingular",value:function(){return this.isSquare()&&0===this.determinant()}},{key:"trace",value:function(){if(0===this.elements.length)return 0;if(!this.isSquare())return null;for(var e=this.elements[0][0],t=this.elements.length,n=1;n<t;n++)e+=this.elements[n][n];return e}},{key:"rank",value:function(){if(0===this.elements.length)return 0;var e,t=this.toRightTriangular(),n=0,r=this.elements.length,i=this.elements[0].length;while(r--){e=i;while(e--)if(Math.abs(t.elements[r][e])>Ue){n++;break}}return n}},{key:"augment",value:function(t){if(0===this.elements.length)return this.dup();var n=t.elements||t;"undefined"===typeof n[0][0]&&(n=new e(n).elements);var r,i=this.dup(),s=i.elements[0].length,a=i.elements.length,o=n[0].length;if(a!==n.length)return null;while(a--){r=o;while(r--)i.elements[a][s+r]=n[a][r]}return i}},{key:"inverse",value:function(){if(0===this.elements.length)return null;if(!this.isSquare()||this.isSingular())return null;var t,n,r,i,s,a=this.elements.length,o=a,u=this.augment(e.I(a)).toRightTriangular(),l=u.elements[0].length,c=[];while(o--){for(r=[],c[o]=[],i=u.elements[o][o],n=0;n<l;n++)s=u.elements[o][n]/i,r.push(s),n>=a&&c[o].push(s);u.elements[o]=r,t=o;while(t--){for(r=[],n=0;n<l;n++)r.push(u.elements[t][n]-u.elements[o][n]*u.elements[t][o]);u.elements[t]=r}}return new e(c)}},{key:"round",value:function(){return this.map(function(e){return Math.round(e)})}},{key:"snapTo",value:function(e){return this.map(function(t){return Math.abs(t-e)<=Ue?e:t})}},{key:"inspect",value:function(){var e=[],t=this.elements.length;if(0===t)return"[]";for(var n=0;n<t;n++)e.push(new He(this.elements[n]).inspect());return e.join("\n")}},{key:"setElements",value:function(e){var t,n,r=e.elements||e;if(r[0]&&"undefined"!==typeof r[0][0]){t=r.length,this.elements=[];while(t--){n=r[t].length,this.elements[t]=[];while(n--)this.elements[t][n]=r[t][n]}return this}var i=r.length;for(this.elements=[],t=0;t<i;t++)this.elements.push([r[t]]);return this}},{key:"flatten",value:function(){var e=[];if(0==this.elements.length)return[];for(var t=0;t<this.elements[0].length;t++)for(var n=0;n<this.elements.length;n++)e.push(this.elements[n][t]);return e}},{key:"ensure4x4",value:function(){if(4==this.elements.length&&4==this.elements[0].length)return this;if(this.elements.length>4||this.elements[0].length>4)return null;for(var e=0;e<this.elements.length;e++)for(var t=this.elements[e].length;t<4;t++)e==t?this.elements[e].push(1):this.elements[e].push(0);for(e=this.elements.length;e<4;e++)0==e?this.elements.push([1,0,0,0]):1==e?this.elements.push([0,1,0,0]):2==e?this.elements.push([0,0,1,0]):3==e&&this.elements.push([0,0,0,1]);return this}},{key:"make3x3",value:function(){return 4!=this.elements.length||4!=this.elements[0].length?null:new e([[this.elements[0][0],this.elements[0][1],this.elements[0][2]],[this.elements[1][0],this.elements[1][1],this.elements[1][2]],[this.elements[2][0],this.elements[2][1],this.elements[2][2]]])}}]),e}();Ze.I=function(e){var t,n=[],r=e;while(r--){t=e,n[r]=[];while(t--)n[r][t]=r===t?1:0}return new Ze(n)},Ze.Diagonal=function(e){var t=e.length,n=Ze.I(t);while(t--)n.elements[t][t]=e[t];return n},Ze.Rotation=function(e,t){if(!t)return new Ze([[Math.cos(e),-Math.sin(e)],[Math.sin(e),Math.cos(e)]]);var n=t.dup();if(3!==n.elements.length)return null;var r=n.modulus(),i=n.elements[0]/r,s=n.elements[1]/r,a=n.elements[2]/r,o=Math.sin(e),u=Math.cos(e),l=1-u;return new Ze([[l*i*i+u,l*i*s-o*a,l*i*a+o*s],[l*i*s+o*a,l*s*s+u,l*s*a-o*i],[l*i*a-o*s,l*s*a+o*i,l*a*a+u]])},Ze.RotationX=function(e){var t=Math.cos(e),n=Math.sin(e);return new Ze([[1,0,0],[0,t,-n],[0,n,t]])},Ze.RotationY=function(e){var t=Math.cos(e),n=Math.sin(e);return new Ze([[t,0,n],[0,1,0],[-n,0,t]])},Ze.RotationZ=function(e){var t=Math.cos(e),n=Math.sin(e);return new Ze([[t,-n,0],[n,t,0],[0,0,1]])},Ze.Random=function(e,t){return Ze.Zero(e,t).map(function(){return Math.random()})},Ze.Translation=function(e){if(2==e.elements.length){var t=Ze.I(3);return t.elements[2][0]=e.elements[0],t.elements[2][1]=e.elements[1],t}if(3==e.elements.length){t=Ze.I(4);return t.elements[0][3]=e.elements[0],t.elements[1][3]=e.elements[1],t.elements[2][3]=e.elements[2],t}throw"Invalid length for Translation"},Ze.Zero=function(e,t){var n,r=[],i=e;while(i--){n=t,r[i]=[];while(n--)r[i][n]=0}return new Ze(r)},Ze.prototype.toUpperTriangular=Ze.prototype.toRightTriangular,Ze.prototype.det=Ze.prototype.determinant,Ze.prototype.tr=Ze.prototype.trace,Ze.prototype.rk=Ze.prototype.rank,Ze.prototype.inv=Ze.prototype.inverse,Ze.prototype.x=Ze.prototype.multiply;var He=function(){function e(t){Pe(this,e),this.setElements(t)}return Re(e,[{key:"e",value:function(e){return e<1||e>this.elements.length?null:this.elements[e-1]}},{key:"dimensions",value:function(){return this.elements.length}},{key:"modulus",value:function(){return Math.sqrt(this.dot(this))}},{key:"eql",value:function(e){var t=this.elements.length,n=e.elements||e;if(t!==n.length)return!1;while(t--)if(Math.abs(this.elements[t]-n[t])>Ue)return!1;return!0}},{key:"dup",value:function(){return new e(this.elements)}},{key:"map",value:function(t,n){var r=[];return this.each(function(e,i){r.push(t.call(n,e,i))}),new e(r)}},{key:"forEach",value:function(e,t){for(var n=this.elements.length,r=0;r<n;r++)e.call(t,this.elements[r],r+1)}},{key:"toUnitVector",value:function(){var e=this.modulus();return 0===e?this.dup():this.map(function(t){return t/e})}},{key:"angleFrom",value:function(e){var t=e.elements||e,n=this.elements.length;if(n!==t.length)return null;var r=0,i=0,s=0;if(this.each(function(e,n){r+=e*t[n-1],i+=e*e,s+=t[n-1]*t[n-1]}),i=Math.sqrt(i),s=Math.sqrt(s),i*s===0)return null;var a=r/(i*s);return a<-1&&(a=-1),a>1&&(a=1),Math.acos(a)}},{key:"isParallelTo",value:function(e){var t=this.angleFrom(e);return null===t?null:t<=Ue}},{key:"isAntiparallelTo",value:function(e){var t=this.angleFrom(e);return null===t?null:Math.abs(t-Math.PI)<=Ue}},{key:"isPerpendicularTo",value:function(e){var t=this.dot(e);return null===t?null:Math.abs(t)<=Ue}},{key:"add",value:function(e){var t=e.elements||e;return this.elements.length!==t.length?null:this.map(function(e,n){return e+t[n-1]})}},{key:"subtract",value:function(e){var t=e.elements||e;return this.elements.length!==t.length?null:this.map(function(e,n){return e-t[n-1]})}},{key:"multiply",value:function(e){return this.map(function(t){return t*e})}},{key:"dot",value:function(e){var t=e.elements||e,n=0,r=this.elements.length;if(r!==t.length)return null;while(r--)n+=this.elements[r]*t[r];return n}},{key:"cross",value:function(t){var n=t.elements||t;if(3!==this.elements.length||3!==n.length)return null;var r=this.elements;return new e([r[1]*n[2]-r[2]*n[1],r[2]*n[0]-r[0]*n[2],r[0]*n[1]-r[1]*n[0]])}},{key:"max",value:function(){var e=0,t=this.elements.length;while(t--)Math.abs(this.elements[t])>Math.abs(e)&&(e=this.elements[t]);return e}},{key:"indexOf",value:function(e){for(var t=null,n=this.elements.length,r=0;r<n;r++)null===t&&this.elements[r]===e&&(t=r+1);return t}},{key:"toDiagonalMatrix",value:function(){return Ze.Diagonal(this.elements)}},{key:"round",value:function(){return this.map(function(e){return Math.round(e)})}},{key:"snapTo",value:function(e){return this.map(function(t){return Math.abs(t-e)<=Ue?e:t})}},{key:"distanceFrom",value:function(e){if(e.anchor||e.start&&e.end)return e.distanceFrom(this);var t=e.elements||e;if(t.length!==this.elements.length)return null;var n,r=0;return this.each(function(e,i){n=e-t[i-1],r+=n*n}),Math.sqrt(r)}},{key:"liesOn",value:function(e){return e.contains(this)}},{key:"liesIn",value:function(e){return e.contains(this)}},{key:"rotate",value:function(t,n){var r,i,s,a,o=null;switch(t.determinant&&(o=t.elements),this.elements.length){case 2:return r=n.elements||n,2!==r.length?null:(o||(o=Ze.Rotation(t).elements),i=this.elements[0]-r[0],s=this.elements[1]-r[1],new e([r[0]+o[0][0]*i+o[0][1]*s,r[1]+o[1][0]*i+o[1][1]*s]));case 3:if(!n.direction)return null;var u=n.pointClosestTo(this).elements;return o||(o=Ze.Rotation(t,n.direction).elements),i=this.elements[0]-u[0],s=this.elements[1]-u[1],a=this.elements[2]-u[2],new e([u[0]+o[0][0]*i+o[0][1]*s+o[0][2]*a,u[1]+o[1][0]*i+o[1][1]*s+o[1][2]*a,u[2]+o[2][0]*i+o[2][1]*s+o[2][2]*a]);default:return null}}},{key:"reflectionIn",value:function(t){if(t.anchor){var n=this.elements.slice(),r=t.pointClosestTo(n).elements;return new e([r[0]+(r[0]-n[0]),r[1]+(r[1]-n[1]),r[2]+(r[2]-(n[2]||0))])}var i=t.elements||t;return this.elements.length!==i.length?null:this.map(function(e,t){return i[t-1]+(i[t-1]-e)})}},{key:"to3D",value:function(){var e=this.dup();switch(e.elements.length){case 3:break;case 2:e.elements.push(0);break;default:return null}return e}},{key:"inspect",value:function(){return"["+this.elements.join(", ")+"]"}},{key:"setElements",value:function(e){return this.elements=(e.elements||e).slice(),this}},{key:"flatten",value:function(){return this.elements}}]),e}();He.Random=function(e){var t=[];while(e--)t.push(Math.random());return new He(t)},He.Zero=function(e){var t=[];while(e--)t.push(0);return new He(t)},He.prototype.x=He.prototype.multiply,He.prototype.each=He.prototype.forEach,He.i=new He([1,0,0]),He.j=new He([0,1,0]),He.k=new He([0,0,1]);var Je=function(e,t,n){for(var r=[],i=Object.keys(e.dimensions),s=i.length,a=.5,o=0;o<s;++o){var u=t(i[o]),l=e.dimensions[i[o]].yscale(n[i[o]]);if(r.push(new He([u,l])),o<s-1){var c=u+a*(t(i[o+1])-u),h=l+a*(e.dimensions[i[o+1]].yscale(n[i[o+1]])-l);if(null!==e.bundleDimension){var d=e.clusterCentroids.get(e.dimensions[e.bundleDimension].yscale(n[e.bundleDimension])).get(i[o]),f=e.clusterCentroids.get(e.dimensions[e.bundleDimension].yscale(n[e.bundleDimension])).get(i[o+1]),m=.5*(d+f);h=m+(1-e.bundlingStrength)*(h-m)}r.push(new He([c,h]))}}return r},Ge=function(e,t){var n=t.length,r=e,i=[];i.push(t[0]),i.push(new He([t[0].e(1)+2*r*(t[1].e(1)-t[0].e(1)),t[0].e(2)]));for(var s=1;s<n-1;++s){var a=t[s],o=t[s-1],u=t[s+1],l=o.subtract(u);i.push(a.add(l.x(r))),i.push(a),i.push(a.subtract(l.x(r)))}return i.push(new He([t[n-1].e(1)+2*r*(t[n-2].e(1)-t[n-1].e(1)),t[n-1].e(2)])),i.push(t[n-1]),i},Qe=function(e,t,n,r){var i=Je(e,t,n),s=Ge(e.smoothness,i);r.moveTo(s[0].e(1),s[0].e(2));for(var a=1;a<s.length;a+=3){if(e.showControlPoints)for(var o=0;o<3;o++)r.fillRect(s[a+o].e(1),s[a+o].e(2),2,2);r.bezierCurveTo(s[a].e(1),s[a].e(2),s[a+1].e(1),s[a+1].e(2),s[a+2].e(1),s[a+2].e(2))}},$e=function(e){return"bottom"===e.nullValueSeparator?Y(e)+1:"top"===e.nullValueSeparator?1:(console.log("A value is NULL, but nullValueSeparator is not set; set it to 'bottom' or 'top'."),Y(e)+1)},et=function(e,t,n,r){Object.keys(e.dimensions).map(function(r){return[t(r),void 0===n[r]?$e(e):e.dimensions[r].yscale(n[r])]}).sort(function(e,t){return e[0]-t[0]}).forEach(function(e,t){0===t?r.moveTo(e[0],e[1]):r.lineTo(e[0],e[1])})},tt=function(e,t,n,r){r.beginPath(),null!==e.bundleDimension&&e.bundlingStrength>0||e.smoothness>0?Qe(e,t,n,r):et(e,t,n,r),r.stroke()},nt=function(e){return"function"===typeof e?e:function(){return e}},rt=function(e,t,n){return function(r,i){return t.marked.strokeStyle=nt(e.color)(r,i),tt(e,n,r,t.marked)}},it=function(e,t,n,r){return function(){t.clear("marked"),e.marked.length&&e.marked.forEach(rt(e,n,r))}},st=function(e,t){return function(){e.marked?t(e.marked):t([])}},at=function(e,t,n){return function(){return Object.keys(e.dimensions).length||t.detectDimensions(),t.renderMarked[e.mode](),n.call("render",this),this}},ot=function(e,t,n){return function(r,i){return null!==e.brushedColor?t.brushed.strokeStyle=nt(e.brushedColor)(r,i):t.brushed.strokeStyle=nt(e.color)(r,i),tt(e,n,r,t.brushed)}},ut=function(e,t,n,r,i){return function(){r.clear("brushed"),Ye(e,i)&&!1!==e.brushed&&e.brushed.forEach(ot(e,t,n))}},lt=function(e,t,n){return function(){Ye(e,t)?n(e.brushed):n([])}},ct=function(e,t,n){return function(){return Object.keys(e.dimensions).length||t.detectDimensions(),t.renderBrushed[e.mode](),n.call("render",this),this}},ht=function(e){return function(t){for(var n=[],i=0;i<e.brushes.length;i++)e.brushes[i].data!==t&&n.push(e.brushes[i]);if(e.brushes=n,e.brushed=!1,void 0!==pc.g())for(var s=pc.g().selectAll(".brush").nodes(),a=0;a<s.length;a++)s[a].__data__===t&&(Object(r["f"])(Object(r["f"])(s[a]).nodes()[0].parentNode).selectAll(".dummy").remove(),e.dimensions[t].brush.move(Object(r["f"])(s[a],null)));return this}},dt=function(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},ft=function(e){return function(){return"Parallel Coordinates: "+Object.keys(e.dimensions).length+" dimensions ("+Object.keys(e.data[0]).length+" total) , "+e.data.length+" rows"}},mt=function(e){for(var t=[],n=0;n<e.length-1;n++)t.push([e[n],e[n+1]]);return t},gt=function(e,t,n){return function(r,i){return t.highlight.strokeStyle=nt(e.color)(r,i),tt(e,n,r,t.highlight)}},vt=function(e,t,n,i,s,a){return function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===o?e.highlighted:(e.highlighted=o,t.clear("highlight"),Object(r["g"])([n.foreground,n.brushed]).classed("faded",!0),o.forEach(gt(e,s,a)),i.call("highlight",this,o),this)}},pt=function(e,t,n){return function(){return e.highlighted=[],t.clear("highlight"),Object(r["g"])([n.foreground,n.brushed]).classed("faded",!1),this}},bt=function(e,t,n,i,s,a){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===t?e.marked:(e.marked=e.marked.concat(t),Object(r["g"])([n.foreground,n.brushed]).classed("dimmed",!0),t.forEach(rt(e,s,a)),i.call("mark",this,t),this)}},yt=function(e,t,n){return function(){return e.marked=[],t.clear("marked"),Object(r["g"])([n.foreground,n.brushed]).classed("dimmed",!1),this}},kt=function(e){return function(){return e._g.remove(),delete e._g,this}},wt=function(e,t,n){return function(){return Object.keys(e.dimensions).length||t.detectDimensions(),t.autoscale(),t.render[e.mode](),n.call("render",this),this}},xt=function(e,t,n){return function(r,i){return t.foreground.strokeStyle=nt(e.color)(r,i),tt(e,n,r,t.foreground)}},Ot=function(e,t,n,r){return function(){t.clear("foreground"),t.clear("highlight"),t.renderBrushed.default(),t.renderMarked.default(),e.data.forEach(xt(e,n,r))}},jt=function(e,t,n){return function(){t.renderBrushed.queue(),t.renderMarked.queue(),n(e.data)}},At=function(e){return parseFloat(e)==e&&null!==e?"number":dt(e)},Mt=function(e){return Object.keys(e[0]).reduce(function(t,n){var r=isNaN(Number(n))?n:parseInt(n);return t[r]=At(e[0][n]),t},{})},St=function(e){return function(){return Object.keys(e.dimensions).sort(function(t,n){return Object(u["a"])(e.dimensions[t].index,e.dimensions[n].index)})}},_t=function(e){return function(){return e.interactive=!0,this}},Et=function(e,t){return function(){return e.shadows=!0,t.alphaOnBrushed(.1),t.render(),this}},Dt=function(e,t,n){var i=function i(s){return s=i.selection=Object(r["f"])(s),e.width=s.node().clientWidth,e.height=s.node().clientHeight,["dots","foreground","brushed","marked","highlight"].forEach(function(e){t[e]=s.append("canvas").attr("class",e).node(),n[e]=t[e].getContext("2d")}),i.svg=s.append("svg").attr("width",e.width).attr("height",e.height).style("font","14px sans-serif").style("position","absolute").append("svg:g").attr("transform","translate("+e.margin.left+","+e.margin.top+")"),i};return i},Pt=function(e){return function(t){return e.dimensions[t].yscale.domain(e.dimensions[t].yscale.domain().reverse()),this}},Rt=function(e){return function(){return e.dimensions(e.applyDimensionDefaults()),this}},Tt=function(e,t){return function(n,r){return e.dimensions[n].yscale.domain(r),t.render.default(),t.updateAxes(),this}},Nt="2.2.9",Ct={data:[],highlighted:[],marked:[],dimensions:{},dimensionTitleRotation:0,brushes:[],brushed:!1,brushedColor:null,alphaOnBrushed:0,lineWidth:1.4,highlightedLineWidth:3,mode:"default",markedLineWidth:3,markedShadowColor:"#ffffff",markedShadowBlur:10,rate:20,width:600,height:300,margin:{top:24,right:20,bottom:12,left:20},nullValueSeparator:"undefined",nullValueSeparatorPadding:{top:8,right:0,bottom:8,left:0},color:"#069",composite:"source-over",alpha:.7,bundlingStrength:.5,bundleDimension:null,smoothness:0,showControlPoints:!1,hideAxis:[],flipAxes:[],animationTime:1100,rotateLabels:!1},It=void 0,Bt=function(e){var t=Object.assign({},Ct,e);e&&e.dimensionTitles&&(console.warn("dimensionTitles passed in userConfig is deprecated. Add title to dimension object."),Object(l["a"])(e.dimensionTitles).forEach(function(e){t.dimensions[e.key]?t.dimensions[e.key].title=t.dimensions[e.key].title?t.dimensions[e.key].title:e.value:t.dimensions[e.key]={title:e.value}}));var n=["render","resize","highlight","mark","brush","brushend","brushstart","axesreorder"].concat(Object(l["b"])(t)),r=h["a"].apply(It,n),i={brushable:!1,reorderable:!1,axes:!1,interactive:!1,debug:!1},s=Object(o["c"])(),a={},u=Object(c["b"])().ticks(5),d={},f={},m={modes:{None:{install:function(e){},uninstall:function(e){},selected:function(){return[]},brushState:function(){return{}}}},mode:"None",predicate:"AND",currentMode:function(){return this.modes[this.mode]}};return{config:t,events:r,eventTypes:n,flags:i,xscale:s,dragging:a,axis:u,ctx:d,canvas:f,brush:m}},Xt=function(e,t){var n=new Map,r=new Map;return e.data.forEach(function(n){var i=e.dimensions[t].yscale(n[t]);r.has(i)||r.set(i,0);var s=r.get(i);r.set(i,s+1)}),e.data.forEach(function(i){Object.keys(e.dimensions).map(function(s){var a=e.dimensions[t].yscale(i[t]);if(!n.has(a)){var o=new Map;n.set(a,o)}n.get(a).has(s)||n.get(a).set(s,0);var u=n.get(a).get(s);u+=e.dimensions[s].yscale(i[s])/r.get(a),n.get(a).set(s,u)})}),n},qt=void 0,zt=function(e,t){return t.forEach(function(t){delete e[t]}),e},Ft=function(e,t,n,r,i,s,a,o,u){return h["a"].apply(qt,Object.keys(e)).on("composite",function(e){t.foreground.globalCompositeOperation=e.value,t.brushed.globalCompositeOperation=e.value}).on("alpha",function(e){t.foreground.globalAlpha=e.value,t.brushed.globalAlpha=e.value}).on("brushedColor",function(e){t.brushed.strokeStyle=e.value}).on("width",function(e){return n.resize()}).on("height",function(e){return n.resize()}).on("margin",function(e){return n.resize()}).on("rate",function(e){a.rate(e.value),o.rate(e.value),u.rate(e.value)}).on("dimensions",function(t){e.dimensions=n.applyDimensionDefaults(Object.keys(t.value)),r.domain(n.getOrderedDimensionKeys()),n.sortDimensions(),s.interactive&&n.render().updateAxes()}).on("bundleDimension",function(t){Object.keys(e.dimensions).length||n.detectDimensions(),n.autoscale(),"number"===typeof t.value?t.value<Object.keys(e.dimensions).length?e.bundleDimension=e.dimensions[t.value]:t.value<e.hideAxis.length&&(e.bundleDimension=e.hideAxis[t.value]):e.bundleDimension=t.value,e.clusterCentroids=Xt(e,e.bundleDimension),s.interactive&&n.render()}).on("hideAxis",function(t){n.dimensions(n.applyDimensionDefaults()),n.dimensions(zt(e.dimensions,t.value))}).on("flipAxes",function(t){t.value&&t.value.length&&(t.value.forEach(function(t){xe(e,n,i)(t)}),n.updateAxes(0))})},Vt=function(e,t,n,r){Object.keys(t).forEach(function(i){e[i]=function(s){if(!arguments.length)return t[i];"dimensions"===i&&"[object Array]"===Object.prototype.toString.call(s)&&(console.warn("pc.dimensions([]) is deprecated, use pc.dimensions({})"),s=e.applyDimensionDefaults(s));var a=t[i];return t[i]=s,r.call(i,e,{value:s,previous:a}),n.call(i,e,{value:s,previous:a}),e}})},Lt=function(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}},Kt=function(e,t,n){return e[n]=Lt(e,t,t[n]),e},Yt=function(e,t,n,r,i,s,a,o,u,l){var c=Ft(e,t,n,r,l,i,s,a,o);Vt(n,e,u,c),Kt(n,u,"on"),Kt(n,l,"ticks","orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat")},Wt=function(e){var t=Bt(e),n=t.config,r=t.events,i=t.flags,s=t.xscale,a=t.dragging,o=t.axis,u=t.ctx,l=t.canvas,c=t.brush,h=Dt(n,l,u),m=function(e){return 0===s.range().length&&s.range([0,f(n)],1),null==a[e]?s(e):a[e]},g=d(ot(n,u,m)).rate(50).clear(function(){return h.clear("brushed")}),v=d(rt(n,u,m)).rate(50).clear(function(){return h.clear("marked")}),p=d(xt(n,u,m)).rate(50).clear(function(){h.clear("foreground"),h.clear("highlight")});return Yt(n,u,h,s,i,g,v,p,r,o),h.state=n,h.flags=i,h.autoscale=Se(n,h,s,u),h.scale=Tt(n,h),h.flip=Pt(n),h.commonScale=Ee(n,h),h.detectDimensions=Rt(h),h.detectDimensionTypes=Mt,h.applyDimensionDefaults=Ce(n,h),h.getOrderedDimensionKeys=St(n),h.render=wt(n,h,r),h.renderBrushed=ct(n,h,r),h.renderMarked=at(n,h,r),h.render.default=Ot(n,h,u,m),h.render.queue=jt(n,h,p),h.renderBrushed.default=ut(n,u,m,h,c),h.renderBrushed.queue=lt(n,c,g),h.renderMarked.default=it(n,h,u,m),h.renderMarked.queue=st(n,v),h.compute_real_centroids=De(n,m),h.shadows=Et(i,h),h.axisDots=Xe(n,h,m),h.clear=We(n,h,u,c),h.createAxes=Ie(n,h,s,i,o),h.removeAxes=kt(h),h.updateAxes=Ae(n,h,m,o,i),h.applyAxisConfig=qe,h.brushable=_e(n,h,i),h.brushReset=ht(n),h.selected=be(n,h),h.reorderable=ze(n,h,s,m,a,i),h.reorder=Ve(n,h,s),h.sortDimensionsByRowData=Ke(n),h.sortDimensions=Le(n,m),h.adjacent_pairs=mt,h.interactive=_t(i),h.xscale=s,h.ctx=u,h.canvas=l,h.g=function(){return h._g},h.resize=Fe(n,h,i,r),h.highlight=vt(n,h,l,r,u,m),h.unhighlight=pt(n,h,l),h.mark=bt(n,h,l,r,u,m),h.unmark=yt(n,h,l),h.intersection=ve,h.mergeParcoords=pe(h),h.brushModes=function(){return Object.getOwnPropertyNames(c.modes)},h.brushMode=ke(c,n,h),A(c,n,h,r),G(c,n,h,r,s),ge(c,n,h,r,s),I(c,n,h,r),h.version=Nt,h.toString=ft(n),h.toType=dt,h.toTypeCoerceNumbers=At,h};t["a"]=Wt},"26ff":function(e,t,n){var r;(function(i){(function(){if(!i.requestAnimationFrame){if(i.webkitRequestAnimationFrame)return i.requestAnimationFrame=i["webkitRequestAnimationFrame"],void(i.cancelAnimationFrame=i["webkitCancelAnimationFrame"]||i["webkitCancelRequestAnimationFrame"]);var e=0;i.requestAnimationFrame=function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-e)),s=i.setTimeout(function(){t(n+r)},r);return e=n+r,s},i.cancelAnimationFrame=function(e){clearTimeout(e)}}})(),r=function(){return i.requestAnimationFrame}.call(t,n,t,e),void 0===r||(e.exports=r)})(window)}}]);
//# sourceMappingURL=chunk-e83f6f16.810f856c.js.map